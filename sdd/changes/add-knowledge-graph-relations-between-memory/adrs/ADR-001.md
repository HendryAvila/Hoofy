# Knowledge graph via relations table (not embedded vectors)

**Status:** accepted

## Context

Hoofy's memory observations are isolated records. Users and AI need to understand relationships between decisions, bugs, patterns. Two approaches: (1) add typed relations between observations (graph model), or (2) use vector embeddings for semantic similarity (vector search).

## Decision

Add a `relations` table with typed directional edges between observations. BFS graph traversal via `mem_build_context`. No vector embeddings.

## Rationale

Relations are explicit (no false positives), require zero new dependencies, work with CGO_ENABLED=0, and are deterministic. Vector search was already evaluated and rejected as YAGNI (observation #39). Basic Memory's knowledge graph is its #1 adoption driver — typed relations solve the same problem with less complexity.

## Alternatives Rejected

1. Vector embeddings (sqlite-vec/ChromaDB) — rejected: adds CGo dependency or external service, YAGNI for current scale, non-deterministic results. 2. Tag-based grouping — rejected: too coarse, loses directionality and relation semantics. 3. Hierarchical parent-child only — rejected: real knowledge graphs need arbitrary edges, not just trees.
