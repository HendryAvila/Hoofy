# SDD-Hoffy Adaptive Pipeline — Clarifications

> Generated by [SDD-Hoffy](https://github.com/HendryAvila/sdd-hoffy) | Stage 3: Clarify (Clarity Gate)

## Clarity Score: 81/100

**Mode:** expert | **Threshold:** 50 | **Status:** PASSED

---

## Clarification Rounds


### Round 3

## Clarity Questions & Answers

### Q1: What are the exact stage flows for each (type, size) combination?
**A:** Based on our earlier architecture discussion:
- **fix/small**: describe → tasks → verify
- **fix/medium**: describe → spec (root cause analysis) → tasks → verify
- **fix/large**: describe → spec → design (if architectural impact) → tasks → verify
- **feature/small**: describe → tasks → verify
- **feature/medium**: propose → spec → tasks → verify
- **feature/large**: propose → spec → clarify → design → tasks → verify (≈ full pipeline)
- **refactor/small**: scope (what changes / what doesn't) → tasks → verify
- **refactor/medium**: scope → design → tasks → verify
- **refactor/large**: scope → spec → design → tasks → verify
- **enhancement/small**: describe → tasks → verify
- **enhancement/medium**: propose → spec → tasks → verify
- **enhancement/large**: propose → spec → clarify → design → tasks → verify

Stage names map to reusable stage handlers — "describe" and "scope" are lightweight versions of "propose". "verify" validates all artifacts were produced.

### Q2: What does the change record data model look like?
**A:** A `change.json` file in `sdd/changes/<change-id>/` with:
- `id` (string): slug generated from description, e.g., `fix-fts5-empty-query`
- `type` (enum): feature | fix | refactor | enhancement
- `size` (enum): small | medium | large
- `description` (string): free-text description of the change
- `stages` ([]Stage): ordered list of stages for this flow, each with name + status (pending/in_progress/completed)
- `current_stage` (string): name of the active stage
- `adrs` ([]string): list of ADR IDs captured during this change
- `created_at`, `updated_at` (timestamps)
- `status` (enum): active | completed | archived

This is SEPARATE from the project-level `sdd.json` — they don't interfere.

### Q3: What happens when `sdd_change` is called with an active change already in progress?
**A:** Return an error: "Active change '{id}' already in progress. Complete or cancel it before starting a new one." This enforces the one-active-change constraint (FR-W01).

### Q4: Can `sdd_adr` be used outside of a change flow?
**A:** Yes — FR-012 (Could Have) covers standalone ADR capture. In v1, `sdd_adr` always works: if there's an active change, the ADR is linked to it AND saved to memory. If there's no active change, it's saved to memory only (with project context). The ADR format is: Context, Decision, Rationale, Alternatives Rejected, Status (proposed/accepted/deprecated/superseded).

### Q5: What if the project SDD pipeline hasn't been initialized (no `sdd/sdd.json`)?
**A:** `sdd_change` should work independently of the project pipeline. It only needs `sdd/changes/` directory. If `sdd/` doesn't exist at all, create it. The adaptive pipeline and the project pipeline are independent — you can use one without the other.

**Clarity Score after this round:** 81/100

